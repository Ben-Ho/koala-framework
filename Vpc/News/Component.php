<?php/** * Newskomponente * * @package Vpc * @subpackage Components */class Vpc_News_Component extends Vpc_Abstract{    const NAME = 'News';    public function generateHierarchy($filename = '')    {        $pages = array();        foreach($this->getDao()->getTable('Vpc_News_Model')->fetchAll() as $row) {            if ($filename != '' && $filename != $row->filename) continue;            $page = $this->createPage('Vpc_News_Details', 0, $row->id);            $page->setNewsId($row->id);            $page->title = $row->title;            $this->getPagecollection()->addTreePage($page, $row->filename, $row->title, $this);            $pages[] = $page;        }        return $pages;    }    public function getTemplateVars()    {        $ret = parent::getTemplateVars();        $ret['news'] = array();        foreach($this->generateHierarchy() as $n) {            $data['title'] = $n->title;            $data['filename'] = $n->getUrl();            $ret['news'][] = $data;        }        $ret['id'] = $this->getComponentId();        $ret['template'] = 'News/Aktuelle.html';        return $ret;    }}