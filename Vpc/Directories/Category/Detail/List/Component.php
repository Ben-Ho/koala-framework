<?phpclass Vpc_Directories_Category_Detail_List_Component extends Vpc_Directories_List_Component{    public function getSelect()    {        $select = parent::getSelect();        $tableName = Vpc_Abstract::getSetting(            $this->getData()->parent->parent->componentClass, 'categoryToItemTableName'        );        $refData = self::getTableReferenceData($tableName);        $select->join($refData['tableName'],                      $refData['tableName'].'.'.$refData['itemColumn'].'='                        .$refData['refTableName'].'.'.$refData['refItemColumn'],                      array());        $categoryId = $this->getData()->parent->id;        $select->where($refData['tableName'].'.category_id = ?', $categoryId);        return $select;    }    protected function _getItemDirectory()    {        return $this->getData()->parent->parent->parent;    }    static public function getTableReferenceData($tableName)    {        $table = new $tableName();        $refMap = $table->info(Zend_Db_Table_Abstract::REFERENCE_MAP);        $refTable = new $refMap['Item']['refTableClass']();        if (!is_array($refMap['Item']['columns'])) {            $refMap['Item']['columns'] = array($refMap['Item']['columns']);        }        if (!is_array($refMap['Item']['refColumns'])) {            $refMap['Item']['refColumns'] = array($refMap['Item']['refColumns']);        }        return array(            'tableName' => $table->info(Zend_Db_Table_Abstract::NAME),            'itemColumn' => $refMap['Item']['columns'][0],            'refItemColumn' => $refMap['Item']['refColumns'][0],            'refTableName' => $refTable->info(Zend_Db_Table_Abstract::NAME)        );    }}