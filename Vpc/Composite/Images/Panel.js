Ext.namespace('Vpc.Composite.Images');Vpc.Composite.Images.Panel = Ext.extend(Ext.Panel,{    initComponent: function()    {        this.grid = new Vps.Auto.GridPanel({            controllerUrl: this.controllerUrl,            baseParams: this.baseParams,            width: 300,            split: true,            region: 'west'        });        var cls = eval(this.imageConfig['class']);        this.imagePanel = new cls({            controllerUrl: this.imageConfig.config.controllerUrl,            region: 'center'        });        this.imagePanel.on('datachange', function(i) {            this.grid.reload();        }, this);        this.grid.on('deleterow', function() {            this.grid.getGrid().getSelectionModel().selectPrevious();        }, this);        this.grid.on('rowselect', function(model, rowIndex, selected) {            var params = {};            params.page_id = this.baseParams.page_id;            params.component_key = this.baseParams.component_key + '-' + selected.data.id;            this.imagePanel.load(params);        }, this);        this.grid.onAdd = this.onAdd;        this.layout = 'border';        this.items = [this.grid, this.imagePanel];        Vpc.Composite.Images.Panel.superclass.initComponent.call(this);    },    onAdd : function()    {        Ext.Ajax.request({            mask: true,            url: this.controllerUrl + '/jsonInsert',            params: this.baseParams,            success: function(response, options, r) {                this.getSelectionModel().clearSelections();                this.reload({                    callback: function(o, r, s) {                        this.getSelectionModel().selectLastRow();                    },                    scope: this                });            },            scope: this        });    }});